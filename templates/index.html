<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>QR Code Generator</h1>
        
        <form method="POST">
            <div class="tabs">
                <button type="button" class="tab-btn active" data-tab="text">Text</button>
                <button type="button" class="tab-btn" data-tab="url">URL</button>
                <button type="button" class="tab-btn" data-tab="image">Image</button>
                <button type="button" class="tab-btn" data-tab="contact">Contact</button>
                <button type="button" class="tab-btn" data-tab="wifi">WiFi</button>
            </div>
            
            <!-- Text Section -->
            <div class="tab-content active" id="text">
                <input type="text" name="text" placeholder="Enter text">
            </div>

            <!-- URL Section -->
            <div class="tab-content" id="url">
                <input type="url" name="url" placeholder="Enter URL (https://example.com)">
            </div>

            <!-- Image Section -->
            <div class="tab-content" id="image">
                <input type="url" name="image" placeholder="Enter image URL">
            </div>

            <!-- Contact Section -->
            <div class="tab-content" id="contact">
                <input type="text" name="name" placeholder="Full Name">
                <input type="tel" name="phone" placeholder="Phone Number">
                <input type="email" name="email" placeholder="Email">
            </div>

            <!-- WiFi Section -->
            <div class="tab-content" id="wifi">
                <input type="text" name="ssid" placeholder="WiFi SSID">
                <input type="text" name="password" placeholder="Password">
                <select name="encryption">
                    <option value="WPA">WPA/WPA2</option>
                    <option value="WEP">WEP</option>
                    <option value="nopass">No Password</option>
                </select>
            </div>

            <button type="submit" class="generate-btn">Generate QR</button>
        </form>

        {% if qr_img %}
        <div class="result">
            <h3>Your QR Code:</h3>
            <img src="{{ qr_img }}" alt="QR Code">
            <button onclick="downloadQR()" class="download-btn">Download QR</button>
        </div>
        {% endif %}
    </div>

    <script>
        const tabs = document.querySelectorAll('.tab-btn');
        const contents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                contents.forEach(c => c.classList.remove('active'));
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        function downloadQR() {
            const img = document.querySelector('.result img');
            if (img) {
                const link = document.createElement('a');
                link.download = 'qr_code.png';
                link.href = img.src;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
    </script>
</body>
</html>